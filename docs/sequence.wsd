@startuml Fishing System Sequence Diagram
title Діаграма послідовності системи "Рибальство"

actor Рибалка
actor Еколог
participant "Служба\nПогоди" as СлужбаПогоди
participant "Система\nРибальства" as Система
participant "Водойма" as Водойма
participant "Сенсор" as Сенсор
participant "ВихідНаВоду" as Вихід
participant "Журнал\nВилову" as Журнал
participant "Звіт" as Звіт

== Планування виходу на воду ==

Рибалка -> Система: запит на планування виходу
activate Система

Система -> СлужбаПогоди: отримати прогноз погоди
activate СлужбаПогоди
СлужбаПогоди --> Система: прогноз погоди
deactivate СлужбаПогоди

Система -> Водойма: отримати карту глибин
activate Водойма
Водойма --> Система: карта глибин
deactivate Водойма

Система -> Водойма: отримати точки кльову
activate Водойма
Водойма --> Система: список точок кльову
deactivate Водойма

Система -> Сенсор: отримати дані якості води
activate Сенсор
Сенсор -> Водойма: виміряти температуру
activate Водойма
Водойма --> Сенсор: температура води
deactivate Водойма

Сенсор -> Водойма: виміряти якість води
activate Водойма
Водойма --> Сенсор: показники якості
deactivate Водойма

Сенсор --> Система: дані сенсорів
deactivate Сенсор

Система -> Вихід: створити план виходу
activate Вихід
Вихід --> Система: підтвердження створення
deactivate Вихід

Система --> Рибалка: план виходу з рекомендаціями
deactivate Система

== Процес риболовлі та моніторингу ==

group Процес риболовлі
  Рибалка -> Вихід: почати вихід на воду
  activate Вихід
  
  Вихід -> Сенсор: розпочати моніторинг
  activate Сенсор
  Сенсор -> Водойма: постійний моніторинг
  activate Водойма
  Водойма --> Сенсор: реальні дані
  deactivate Водойма
  Сенсор --> Вихід: дані моніторингу
  deactivate Сенсор
  
  loop Кожен вилов
    Рибалка -> Вихід: зареєструвати вилов риби
    Вихід -> Журнал: додати запис вилову
    activate Журнал
    Журнал --> Вихід: підтвердження запису
    deactivate Журнал
    Вихід --> Рибалка: підтвердження реєстрації
  end
  
  Рибалка -> Вихід: завершити вихід
  Вихід -> Сенсор: зупинити моніторинг
  activate Сенсор
  Сенсор --> Вихід: підтвердження зупинки
  deactivate Сенсор
  Вихід -> Журнал: фіналізувати записи
  activate Журнал
  Журнал --> Вихід: завершення журналу
  deactivate Журнал
  Вихід --> Рибалка: завершення виходу
  deactivate Вихід
end group

== Екологічний моніторинг ==

group Екологічний аналіз
  Еколог -> Система: запит на звіт про стан водойми
  activate Система
  
  Система -> Сенсор: отримати всі дані
  activate Сенсор
  Сенсор -> Водойма: отримати повні дані
  activate Водойма
  Водойма --> Сенсор: всі показники
  deactivate Водойма
  Сенсор --> Система: історія даних
  deactivate Сенсор
  
  Система -> Водойма: отримати загальну інформацію
  activate Водойма
  Водойма --> Система: характеристики водойми
  deactivate Водойма
  
  Система -> Журнал: отримати статистику вилову
  activate Журнал
  Журнал --> Система: статистичні дані
  deactivate Журнал
  
  Система -> Звіт: сформувати екологічний звіт
  activate Звіт
  Звіт --> Система: готовий звіт
  deactivate Звіт
  
  Система --> Еколог: екологічний звіт про стан водойми
  deactivate Система
end group

== Генерація статистики ==

Рибалка -> Система: запит статистики вилову
activate Система

Система -> Журнал: отримати всі записи
activate Журнал
Журнал --> Система: історія виловів
deactivate Журнал

Система -> Журнал: {final} згенерувати звіт у PDF
activate Журнал
Журнал --> Система: PDF звіт
deactivate Журнал

Система --> Рибалка: статистика та рекомендації
deactivate Система

@enduml